# Sample Outputs

This document contains examples of structured itinerary outputs generated by the AI parser and manual fallback parser.

## Expected JSON Schema

```json
{
  "day": "integer",
  "location": "string", 
  "activities": ["string", "string", ...],
  "accommodation": "string|null (optional)",
  "budget_estimate": "string|null (optional)"
}
```

## Sample Output 1: AI Parser Results

**Input Text (Ukrainian):**
```
Подорож до Амстердама на 3 дні.

Перший день: відвідаю музей Ван Гога, потім прогулянка по каналах, ввечері вечеря в ресторані біля площі Дам.   
Другий день: екскурсія на велосипеді по місту, відвідування ринку Альберта Куйпа, ввечері концерт в Paradiso.
Третій день: поїздка до Кекенхофу, повернення до Амстердама, вечеря в ресторані біля каналу.
```

**AI Parsed Output:**
```json
[
  {
    "day": 1,
    "location": "Amsterdam",
    "activities": [
      "Visit to the Van Gogh Museum",
      "Canal Walk",
      "Dinner at a Restaurant near Dam Square"
    ],
    "accommodation": null,
    "budget_estimate": null
  },
  {
    "day": 2,
    "location": "Amsterdam",
    "activities": [
      "City Bike Tour",
      "Visit to Albert Cuyp Market",
      "Concert at Paradiso"
    ],
    "accommodation": null,
    "budget_estimate": null
  },
  {
    "day": 3,
    "location": "Amsterdam",
    "activities": [
      "Return to Amsterdam",
      "Dinner at a Restaurant near the Canal"
    ],
    "accommodation": null,
    "budget_estimate": null
  }
]

```
```py
Dict export:
{'day': 1, 'location': 'Amsterdam', 'activities': ['Visit to the Van Gogh Museum', 'Canal Walk', 'Dinner at a Restaurant near Dam Square'], 'accommodation': None, 'budget_estimate': None}
{'day': 2, 'location': 'Amsterdam', 'activities': ['City Bike Tour', 'Visit to Albert Cuyp Market', 'Concert at Paradiso'], 'accommodation': None, 'budget_estimate': None}       
{'day': 3, 'location': 'Amsterdam', 'activities': ['Return to Amsterdam', 'Dinner at a Restaurant near the Canal'], 'accommodation': None, 'budget_estimate': None}

```
## Sample Output 2: Manual Parser Results (Fallback)

**Input Text (English):**
```
Trip to Amsterdam for 3 days.
Day 1: Arrival in Amsterdam
- Visit to the Van Gogh Museum
- Canal Walk 
- Dinner at a Restaurant near Dam Square

Day 2: City Tour
- City Bike Tour
- Visit to Albert Cuyp Market
- Concert at Paradiso

Day 3: Last Day
- Return to Amsterdam
- Dinner at a Restaurant near the Canal
```

**Manual Parser Output:**
```json
[
  {
    "day": 1,
    "location": "Amsterdam",
    "activities": [
      "Visit to the Van Gogh Museum",
      "Canal Walk",
      "Dinner at a Restaurant near Dam Square"
    ],
    "accommodation": null,
    "budget_estimate": null
  },
  {
    "day": 2,
    "location": "Amsterdam",
    "activities": [
      "City Tour",
      "City Bike Tour",
      "Visit to Albert Cuyp Market",
      "Concert at Paradiso"
    ],
    "accommodation": null,
    "budget_estimate": null
  },
  {
    "day": 3,
    "location": "Amsterdam",
    "activities": [
      "Return to Amsterdam",
      "Dinner at a Restaurant near the Canal"
    ],
    "accommodation": null,
    "budget_estimate": null
  }
]
```

**Additional Manual Parser Info:**
- **Destination:** Amsterdam  
- **Duration:** 3 days
- **Transportation:** walking


## Error Handling Examples

### API Key Missing (Automatic Fallback)
When no OpenAI API key is provided, the system automatically falls back to manual parsing:

**Console Output:**
```
AI parsing error: API key is required. Trying manual parser...
Generated itinerary:
Day 1: Amsterdam
  • Visit to the Van Gogh Museum
  • Canal Walk
  • Dinner at a Restaurant near Dam Square
```

### Malformed Input (Last Resort Fallback)
**Input:** `"Random unstructured text without clear itinerary"`

**Fallback Output:**
```json
[
  {
    "day": 1,
    "location": "Unknown",
    "activities": ["Plan your trip"],
    "accommodation": null,
    "budget_estimate": null
  }
]
```

## Validation Rules

- `day` must be positive integer starting from 1
- `location` cannot be empty string  
- `activities` must contain at least 1 item, max 10 items per day
- Days must be sequential (1, 2, 3, ... no gaps)
- Each activity must be a non-empty string
- `accommodation` and `budget_estimate` are optional (can be null)

## API Usage Examples

### Unified Parser Function (Recommended)
```python
from utils.parser_functions import parse_itinerary_output, export_to_json

# Works with or without API key - automatic fallback
api_key = "your-openai-key"  # or None
result = parse_itinerary_output(user_input, api_key)

# Export to JSON
json_output = export_to_json(result)
print(json_output)
```

### Direct Manual Parser Usage
```python
from utils.manual_parser import ManualItineraryParser

parser = ManualItineraryParser()
result = parser.parse_itinerary_text(user_input)

print(f"Destination: {result.destination}")
print(f"Duration: {result.duration_days} days") 
print(f"Transportation: {result.transportation}")
```


## Production Usage Notes

- **AI Parser**: Requires OpenAI API key, more intelligent but may have latency
- **Manual Parser**: No external dependencies, faster but pattern-based
- **Fallback Strategy**: System automatically chooses best available option
- **Error Recovery**: Multiple layers of fallback ensure always valid output
- **Multi-language**: Both parsers handle Ukrainian and English inputs